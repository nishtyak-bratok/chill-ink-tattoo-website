# Инструкции по созданию миниатюр для оптимизации ротации

## Проблема
Ротация изображений работает медленно из-за загрузки полноразмерных изображений. Нужно создать оптимизированные миниатюры для быстрой загрузки.

## Решение

### 1. Запуск PowerShell скрипта для создания миниатюр

Выполните следующие команды в **внешнем PowerShell** (не в Cursor):

```powershell
# Перейдите в папку проекта
cd "M:\repository\chill-ink-tattoo-website"

# Запустите скрипт создания миниатюр
.\create_thumbnails.ps1
```

### 2. Что делает скрипт

- Создает папку `thumbnails` в каждой папке мастера
- Генерирует миниатюры размером 150x150 пикселей с 70% качеством JPEG
- Сохраняет их в формате JPG для лучшего сжатия
- Имена файлов: `{master}-work-{number}_thumb.jpg`

### 3. Структура папок после выполнения

```
gallery/
├── renoit/
│   ├── thumbnails/
│   │   ├── renoit-work-1_thumb.jpg
│   │   ├── renoit-work-2_thumb.jpg
│   │   └── ...
│   ├── renoit-work-1.jpg
│   └── ...
├── rocket/
│   ├── thumbnails/
│   └── ...
└── ...
```

### 4. Обновление кода для использования миниатюр

После создания миниатюр нужно обновить функцию `getThumbnailUrl` в `index.html`:

```javascript
function getThumbnailUrl(masterId, workId, extension, width = 200, height = 200) {
    // Используем миниатюры для быстрой загрузки
    const thumbnailPath = `gallery/${masterId}/thumbnails/${masterId}-work-${workId}_thumb.jpg`;
    return thumbnailPath;
}
```

### 5. Преимущества миниатюр

- **Быстрая загрузка**: файлы в 15-25 раз меньше (150x150px, 70% качество)
- **Одновременные обновления**: все карточки обновляются мгновенно
- **Плавные переходы**: нет задержек при смене изображений
- **Лучшая производительность**: меньше нагрузки на браузер

### 6. Альтернативное решение (если скрипт не работает)

Если PowerShell скрипт не работает, можно:

1. **Использовать онлайн-сервисы** для создания миниатюр
2. **Изменить размер изображений** вручную в графическом редакторе
3. **Использовать CSS** для масштабирования (менее эффективно)

### 7. Проверка работы

После создания миниатюр:

1. Откройте сайт
2. Откройте консоль (F12)
3. Проверьте, что ротация работает быстрее
4. Убедитесь, что все карточки обновляются одновременно

## Команды для тестирования

```javascript
// В консоли браузера
debugRotationState()           // Проверить состояние ротации
testPositionUpdate(0)          // Тестировать позицию 1
testPositionUpdate(1)          // Тестировать позицию 2
testPositionUpdate(2)          // Тестировать позицию 3
```

## Ожидаемый результат

- ✅ Ротация работает мгновенно
- ✅ Все карточки обновляются одновременно
- ✅ Нет задержек при смене изображений
- ✅ Плавные переходы между работами
- ✅ Лучшая производительность сайта
